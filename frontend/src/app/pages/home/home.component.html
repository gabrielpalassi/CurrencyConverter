<section class="flex w-full justify-center">
  <div class="mt-5 w-full max-w-7xl px-6 py-6 lg:px-8">
    <!-- Title and description -->
    <div class="mb-12 w-full">
      <p class="text-base font-semibold text-blue-500">Global currency converter</p>
      <h1 class="text-3xl font-bold tracking-tight text-white sm:text-4xl">CurrencyConverter</h1>
      <p class="mt-1 text-lg leading-8 text-slate-400">
        Trusted and open-source global currency conversion and tracking of exchange rates.
      </p>
    </div>
    <!-- Conversion container -->
    <div class="w-full rounded-lg bg-white px-8 py-8 lg:px-9">
      <div class="conversion-custom-grid flex w-full flex-col gap-4">
        <!-- Amount -->
        <currency-input
          label="Amount"
          [prefix]="conversionData.from.prefix"
          [(value)]="conversionData.value"
          [placeholder]="'0.00'"
          [(error)]="inputError"
          class="w-full">
        </currency-input>
        <!-- Currency from -->
        <app-currency-select
          label="From"
          [options]="currencyList"
          [(selectedOption)]="conversionData.from"
          class="w-full lg:max-w-[283.64px]">
        </app-currency-select>
        <!-- Switch currencies button -->
        <button
          (click)="switchConversionCurrencies()"
          [disabled]="loading"
          class="delay-70 h-[48px] w-[48px] rounded-full text-sm ring-1 ring-inset ring-slate-300 transition hover:text-slate-500 disabled:cursor-not-allowed disabled:text-slate-400 disabled:hover:text-slate-400 lg:mt-8">
          &#8644;
        </button>
        <!-- Currency to -->
        <app-currency-select
          label="To"
          [options]="currencyList"
          [(selectedOption)]="conversionData.to"
          class="w-full lg:max-w-[283.64px]">
        </app-currency-select>
        <!-- Convert button -->
        <button
          (click)="convertCurrency()"
          [disabled]="loading"
          class="delay-70 h-[48px] w-full rounded-md bg-blue-500 px-3.5 text-sm font-semibold text-white shadow-sm transition hover:bg-blue-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500 disabled:cursor-not-allowed disabled:bg-blue-300 disabled:hover:bg-blue-300 lg:mt-8">
          @if (loading) {
            <div class="flex h-full w-full items-center justify-center gap-2">
              <div class="h-4 w-4 animate-spin rounded-full border-2 border-blue-200 border-t-white"></div>
              Loading...
            </div>
          } @else {
            Convert
          }
        </button>
      </div>
      <!-- Conversion response -->
      @if (conversionResponse) {
        <div
          class="flex h-[124px] w-full gap-3"
          @expand>
          @if (!loading) {
            <!-- Data -->
            <div @fadeInOut>
              <p class="mt-6 whitespace-nowrap text-base font-semibold text-slate-600">
                {{ conversionResponse.from.value | number: "1.2-5" }}
                {{ conversionResponse.from.currency.shortName }}
              </p>
              <p class="whitespace-nowrap text-2xl font-bold">
                {{ conversionResponse.to.value | number: "1.2-5" }}
                {{ conversionResponse.to.currency.shortName }}
              </p>
              <p class="mt-2 whitespace-nowrap text-xs text-slate-500">
                1 {{ conversionResponse.from.currency.fullName }} =
                {{ conversionResponse.to.value / conversionResponse.from.value | number: "1.2-5" }}
                {{ conversionResponse.to.currency.fullName }}
              </p>
              <p class="mt-1 whitespace-nowrap text-xs text-slate-500">
                1 {{ conversionResponse.to.currency.fullName }} =
                {{ conversionResponse.from.value / conversionResponse.to.value | number: "1.2-5" }}
                {{ conversionResponse.from.currency.fullName }}
              </p>
            </div>
            <!-- Chart -->
            <div
              class="flex w-full *:rounded-b-lg"
              @fadeInOut>
              <highcharts-chart
                [Highcharts]="Highcharts"
                [options]="chartOptions"
                class="display:block mt-6 w-full">
              </highcharts-chart>
            </div>
          }
        </div>
      }
    </div>
  </div>
</section>
<div class="mt-10 flex w-full flex-col items-center justify-center rounded-t-4xl bg-white"></div>
